<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard | LeePola</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600&family=Playfair+Display:wght@600;700&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --primary: #2D1B15; --accent: #C5A059; --bg: #f4f4f4; --white: #fff; --red: #D32F2F; --green: #2E7D32; --blue: #1976D2;
        }
        * { box-sizing: border-box; font-family: 'Montserrat', sans-serif; margin: 0; padding: 0; }
        body { background: var(--bg); display: flex; min-height: 100vh; }
        
        .sidebar { width: 260px; background: var(--primary); color: white; padding: 25px; position: fixed; height: 100%; display: flex; flex-direction: column; overflow-y: auto;}
        .brand { font-family: 'Playfair Display', serif; font-size: 1.8rem; margin-bottom: 40px; display: block; color:white; text-decoration:none;}
        .brand span { color: var(--accent); }
        .menu-item { padding: 12px 15px; cursor: pointer; color: #aaa; transition: 0.3s; display: block; margin-bottom: 8px; border-radius: 8px; font-weight: 500; text-decoration: none;}
        .menu-item:hover { background: rgba(255,255,255,0.1); color: var(--accent); }
        .menu-item.active { background: var(--accent); color: var(--primary); font-weight: 700; }
        .menu-item.danger { color: #ef9a9a; margin-top: auto; }
        .menu-item.danger:hover { background: var(--red); color: white; }

        .main-content { margin-left: 260px; padding: 40px; width: calc(100% - 260px); }
        
        header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px; }
        h2 { font-family: 'Playfair Display', serif; color: var(--primary); font-size: 2rem; }
        .breadcrumb { color: #777; font-size: 0.9rem; margin-bottom: 5px; }

        .card { background: var(--white); padding: 30px; border-radius: 12px; box-shadow: 0 5px 15px rgba(0,0,0,0.05); margin-bottom: 30px; border: 1px solid #eee; }
        .card-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; padding-bottom: 15px; border-bottom: 1px solid #f0f0f0; }
        .card-title { font-size: 1.2rem; font-weight: 700; color: var(--primary); }

        .form-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-bottom: 20px; }
        .form-group { display: flex; flex-direction: column; gap: 8px; }
        label { font-size: 0.8rem; font-weight: 700; color: #555; text-transform: uppercase; letter-spacing: 0.5px; }
        input, select, textarea { padding: 12px; border: 1px solid #ddd; border-radius: 6px; outline: none; transition: 0.3s; background: #fafafa; }
        input:focus, select:focus, textarea:focus { border-color: var(--accent); background: white; box-shadow: 0 0 0 3px rgba(197, 160, 89, 0.1); }
        
        .img-tabs { display: flex; gap: 10px; margin-bottom: 10px; }
        .img-tab { padding: 5px 15px; font-size: 0.8rem; cursor: pointer; border: 1px solid #ddd; border-radius: 20px; background: #eee; }
        .img-tab.active { background: var(--primary); color: white; border-color: var(--primary); }
        .file-preview { width: 100px; height: 100px; object-fit: cover; margin-top: 10px; border-radius: 5px; border: 1px solid #ddd; display: none; background: #f0f0f0; }

        .suggestion-chips { display: flex; gap: 5px; flex-wrap: wrap; margin-top: 5px; }
        .chip { padding: 5px 10px; background: #f0f0f0; border-radius: 15px; font-size: 0.75rem; cursor: pointer; border: 1px solid #ddd; transition:0.2s; color: #555; }
        .chip:hover { background: var(--accent); color: var(--primary); border-color: var(--accent); }

        .btn { padding: 12px 25px; border: none; border-radius: 6px; cursor: pointer; font-weight: 600; text-transform: uppercase; font-size: 0.85rem; transition: 0.2s; }
        .btn-primary { background: var(--primary); color: var(--accent); }
        .btn-primary:hover { background: var(--accent); color: var(--primary); transform: translateY(-2px); }
        .btn-secondary { background: #e0e0e0; color: #333; }
        .btn-secondary:hover { background: #d0d0d0; }
        .btn-update { background: var(--blue); color: white; }
        .btn-update:hover { background: #1565C0; transform: translateY(-2px); }
        
        table { width: 100%; border-collapse: collapse; margin-top: 10px; }
        th, td { text-align: left; padding: 15px; border-bottom: 1px solid #eee; font-size: 0.9rem; vertical-align: middle; }
        th { color: var(--primary); font-weight: 700; background: #fafafa; }
        tr:hover { background-color: #fafafa; }
        
        .action-group { display: flex; gap: 10px; }
        .action-btn { cursor: pointer; font-weight: 600; background: none; border: none; font-size: 0.85rem; padding: 5px 10px; border-radius: 4px; }
        .btn-manage { color: var(--green); background: rgba(46, 125, 50, 0.1); }
        .btn-manage:hover { background: var(--green); color: white; }
        .btn-edit { color: var(--blue); background: rgba(25, 118, 210, 0.1); }
        .btn-edit:hover { background: var(--blue); color: white; }
        .btn-delete { color: var(--red); background: rgba(211, 47, 47, 0.1); }
        .btn-delete:hover { background: var(--red); color: white; }
        
        .view-section { display: none; animation: fadeIn 0.4s; }
        .view-section.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        .shop-banner { background: linear-gradient(135deg, var(--primary), #3e2723); color: var(--accent); padding: 30px; border-radius: 12px; margin-bottom: 30px; display: flex; align-items: center; justify-content: space-between; box-shadow: 0 10px 30px rgba(45, 27, 21, 0.2); }
        .banner-info h1 { margin: 0; font-family: 'Playfair Display', serif; }
        .banner-info p { color: #ccc; margin-top: 5px; }
    </style>
</head>
<body>

    <div class="sidebar">
        <a href="index.html" class="brand">Lee<span>Pola</span> Admin</a>
        
        <div id="menu-shops" class="menu-item active" onclick="app.showShopList()">üè™ Manage Shops</div>
        <div id="menu-current" class="menu-item" style="display:none;" onclick="app.showShopDashboard()">üëâ Current Shop</div>

        <a href="index.html" class="menu-item" style="margin-top: 20px;">‚Üê Back to Website</a>
        <div class="menu-item danger" onclick="app.resetData()">‚ö† Reset All Data</div>
    </div>

    <div class="main-content">

        <div id="view-shops" class="view-section active">
            <header>
                <div>
                    <div class="breadcrumb">Overview</div>
                    <h2>All Shops</h2>
                </div>
            </header>

            <div class="card">
                <div class="card-header"><span class="card-title">Add New Shop</span></div>
                <div class="form-grid">
                    <div class="form-group"><label>Shop Name</label><input id="s-name" type="text" placeholder="e.g. Colombo Woodworks"></div>
                    <div class="form-group"><label>Location</label><input id="s-loc" type="text" placeholder="e.g. Nugegoda"></div>
                    <div class="form-group"><label>WhatsApp Number (94...)</label><input id="s-tel" type="text" placeholder="94771234567"></div>
                    
                    <div class="form-group">
                        <label>Shop Logo</label>
                        <div class="img-tabs">
                            <span class="img-tab active" onclick="app.switchImgInput('s-logo', 'url')">URL Link</span>
                            <span class="img-tab" onclick="app.switchImgInput('s-logo', 'file')">Upload Device</span>
                        </div>
                        <input id="s-logo-url" type="text" placeholder="https://example.com/logo.jpg" oninput="app.updateUrlPreview('s-logo')">
                        <input id="s-logo-file" type="file" accept="image/*" style="display:none;" onchange="app.previewImage(this, 's-logo-preview')">
                        <img id="s-logo-preview" class="file-preview">
                        <input type="hidden" id="s-logo-final"> 
                    </div>
                </div>
                <button class="btn btn-primary" onclick="app.addShop()">+ Create Shop</button>
            </div>

            <div class="card">
                <div class="card-header"><span class="card-title">Registered Shops</span></div>
                <table>
                    <thead><tr><th>Logo</th><th>Shop Name</th><th>Location</th><th>Contact</th><th>Actions</th></tr></thead>
                    <tbody id="shop-table"></tbody>
                </table>
            </div>
        </div>

        <div id="view-single" class="view-section">
            
            <div class="shop-banner">
                <div class="banner-info">
                    <h1 id="dash-shop-name">Shop Name</h1>
                    <p id="dash-shop-loc">üìç Location</p>
                </div>
                <button class="btn btn-secondary" onclick="app.showShopList()">Switch Shop</button>
            </div>

            <div class="card" id="product-form-card">
                <div class="card-header">
                    <span class="card-title" id="form-title">Add Product to Inventory</span>
                    <button class="btn btn-secondary" id="cancel-edit-btn" style="display:none; font-size:0.7rem;" onclick="app.cancelEdit()">Cancel Edit</button>
                </div>
                
                <div class="form-grid">
                    <div class="form-group"><label>Product Name</label><input id="p-name" type="text"></div>
                    <div class="form-group"><label>Price (LKR)</label><input id="p-price" type="number"></div>
                    <div class="form-group">
                        <label>Category</label>
                        <select id="p-cat">
                            <option value="Table">Table</option>
                            <option value="Chair">Chair</option>
                            <option value="Bed">Bed</option>
                            <option value="Storage">Storage</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label>Product Image</label>
                        <div class="img-tabs">
                            <span class="img-tab active" onclick="app.switchImgInput('p-img', 'url')">URL Link</span>
                            <span class="img-tab" onclick="app.switchImgInput('p-img', 'file')">Upload Device</span>
                        </div>
                        <input id="p-img-url" type="text" placeholder="https://..." oninput="app.updateUrlPreview('p-img')">
                        <input id="p-img-file" type="file" accept="image/*" style="display:none;" onchange="app.previewImage(this, 'p-img-preview')">
                        <img id="p-img-preview" class="file-preview">
                        <input type="hidden" id="p-img-final">
                    </div>

                    <div class="form-group">
                        <label>Wooden Type</label>
                        <input id="p-wood" type="text" placeholder="e.g. Teak, Jack, Mahogany">
                        <div class="suggestion-chips">
                            <span class="chip" onclick="app.setInput('p-wood', 'Teak')">Teak</span>
                            <span class="chip" onclick="app.setInput('p-wood', 'Mahogany')">Mahogany</span>
                            <span class="chip" onclick="app.setInput('p-wood', 'Jack Wood')">Jack Wood</span>
                            <span class="chip" onclick="app.setInput('p-wood', 'Mara')">Mara</span>
                        </div>
                    </div>

                    <div class="form-group">
                        <label>Available Finishes (Select Multiple)</label>
                        <input id="p-colors" type="text" placeholder="e.g. Black, Brown">
                        <div class="suggestion-chips">
                            <span class="chip" onclick="app.appendInput('p-colors', 'Natural')">Natural</span>
                            <span class="chip" onclick="app.appendInput('p-colors', 'Dark Brown')">Dark Brown</span>
                            <span class="chip" onclick="app.appendInput('p-colors', 'Black')">Black</span>
                            <span class="chip" onclick="app.appendInput('p-colors', 'White')">White</span>
                            <span class="chip" onclick="app.appendInput('p-colors', 'Walnut')">Walnut</span>
                        </div>
                    </div>

                    <div class="form-group">
                        <label>Available Sizes (Select Multiple)</label>
                        <input id="p-size" type="text" placeholder="e.g. King, 6x4 ft">
                        <div class="suggestion-chips">
                            <span class="chip" onclick="app.appendInput('p-size', 'Standard')">Standard</span>
                            <span class="chip" onclick="app.appendInput('p-size', 'King')">King</span>
                            <span class="chip" onclick="app.appendInput('p-size', 'Queen')">Queen</span>
                            <span class="chip" onclick="app.appendInput('p-size', 'Single')">Single</span>
                            <span class="chip" onclick="app.appendInput('p-size', '6x4 ft')">6x4 ft</span>
                        </div>
                    </div>

                    <div class="form-group"><label>Badge (Optional)</label><input id="p-badge" type="text" placeholder="e.g. Sale, New"></div>
                </div>
                <div class="form-group" style="margin-bottom: 20px;">
                    <label>Description</label>
                    <textarea id="p-desc" rows="3" placeholder="Describe the item..."></textarea>
                </div>
                
                <button id="save-product-btn" class="btn btn-primary" onclick="app.saveProduct()">+ Add Product</button>
            </div>

            <div class="card">
                <div class="card-header"><span class="card-title">Current Inventory</span></div>
                <table>
                    <thead><tr><th>Image</th><th>Name</th><th>Details</th><th>Price</th><th>Actions</th></tr></thead>
                    <tbody id="product-table"></tbody>
                </table>
            </div>
        </div>

    </div>

    <script>
        const app = {
            shops: [],
            products: [],
            currentShopId: null,
            editingProductId: null,

            init: function() {
                this.loadData();
                this.renderShopTable();
            },

            loadData: function() {
                try {
                    this.shops = JSON.parse(localStorage.getItem('leepola_shops')) || [];
                    this.products = JSON.parse(localStorage.getItem('leepola_products')) || [];
                } catch(e) { console.error("Data load error", e); }
            },

            saveData: function() {
                try {
                    localStorage.setItem('leepola_shops', JSON.stringify(this.shops));
                    localStorage.setItem('leepola_products', JSON.stringify(this.products));
                } catch (e) {
                    alert("Storage Error: Image file likely too large. Please upload a smaller image.");
                }
            },

            setInput: function(id, val) {
                document.getElementById(id).value = val;
            },

            appendInput: function(id, val) {
                const el = document.getElementById(id);
                if(el.value === "") {
                    el.value = val;
                } else if(!el.value.includes(val)) {
                    el.value += ", " + val;
                }
            },

            showShopList: function() {
                document.getElementById('view-shops').classList.add('active');
                document.getElementById('view-single').classList.remove('active');
                document.getElementById('menu-shops').classList.add('active');
                document.getElementById('menu-current').classList.remove('active');
                document.getElementById('menu-current').style.display = 'none';
                this.currentShopId = null;
                this.cancelEdit(); 
            },

            showShopDashboard: function(shopId) {
                if(shopId) this.currentShopId = shopId;
                const shop = this.shops.find(s => s.id === this.currentShopId);
                
                if(!shop) return this.showShopList();

                document.getElementById('dash-shop-name').innerText = shop.name;
                document.getElementById('dash-shop-loc').innerText = "üìç " + shop.location;
                
                document.getElementById('view-shops').classList.remove('active');
                document.getElementById('view-single').classList.add('active');
                
                document.getElementById('menu-shops').classList.remove('active');
                const currentMenu = document.getElementById('menu-current');
                currentMenu.style.display = 'block';
                currentMenu.innerText = "üëâ " + shop.name;
                currentMenu.classList.add('active');

                this.renderProductTable();
                this.cancelEdit();
            },

            switchImgInput: function(prefix, type) {
                const urlInput = document.getElementById(prefix + '-url');
                const fileInput = document.getElementById(prefix + '-file');
                const finalInput = document.getElementById(prefix + '-final');
                const tabs = event.target.parentElement.children;
                
                if(type === 'url') {
                    urlInput.style.display = 'block';
                    fileInput.style.display = 'none';
                    tabs[0].classList.add('active');
                    tabs[1].classList.remove('active');
                    fileInput.value = ''; 
                    finalInput.value = ''; 
                } else {
                    urlInput.style.display = 'none';
                    fileInput.style.display = 'block';
                    tabs[0].classList.remove('active');
                    tabs[1].classList.add('active');
                    urlInput.value = '';
                }
            },

            previewImage: function(input, previewId) {
                const file = input.files[0];
                if(file) {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        const preview = document.getElementById(previewId);
                        preview.src = e.target.result;
                        preview.style.display = 'block';
                        const hiddenInputId = previewId.replace('-preview', '-final');
                        document.getElementById(hiddenInputId).value = e.target.result; 
                    }
                    reader.readAsDataURL(file);
                }
            },

            updateUrlPreview: function(prefix) {
                const url = document.getElementById(prefix + '-url').value;
                const preview = document.getElementById(prefix + '-preview');
                if(url) {
                    preview.src = url;
                    preview.style.display = 'block';
                } else {
                    preview.style.display = 'none';
                }
            },

            getFinalImage: function(prefix) {
                const fileData = document.getElementById(prefix + '-final').value;
                if(fileData) return fileData;
                const urlData = document.getElementById(prefix + '-url').value;
                return urlData; 
            },

            addShop: function() {
                const name = document.getElementById('s-name').value;
                const loc = document.getElementById('s-loc').value;
                const tel = document.getElementById('s-tel').value;
                const logo = this.getFinalImage('s-logo') || 'https://via.placeholder.com/150';

                if(!name || !loc) return alert("Name and Location are required!");

                const newId = this.shops.length > 0 ? Math.max(...this.shops.map(s => s.id)) + 1 : 1;
                
                this.shops.push({ id: newId, name, location: loc, tel, logo });
                this.saveData();
                this.renderShopTable();
                
                document.getElementById('s-name').value = '';
                document.getElementById('s-loc').value = '';
                document.getElementById('s-tel').value = '';
                document.getElementById('s-logo-url').value = '';
                document.getElementById('s-logo-final').value = '';
                document.getElementById('s-logo-preview').style.display = 'none';
                
                alert("Shop Created Successfully!");
            },

            deleteShop: function(id) {
                if(confirm("‚ö† Delete this shop? All its products will be deleted too!")) {
                    this.shops = this.shops.filter(s => s.id !== id);
                    this.products = this.products.filter(p => p.shopId !== id);
                    this.saveData();
                    this.renderShopTable();
                }
            },

            renderShopTable: function() {
                const tbody = document.getElementById('shop-table');
                if(this.shops.length === 0) {
                    tbody.innerHTML = `<tr><td colspan="5" style="text-align:center; padding:30px;">No shops found. Add one above!</td></tr>`;
                    return;
                }
                
                tbody.innerHTML = this.shops.map(s => `
                    <tr>
                        <td><img src="${s.logo}" style="width:50px; height:50px; border-radius:50%; object-fit:cover; border:2px solid #eee;"></td>
                        <td><strong>${s.name}</strong></td>
                        <td>${s.location}</td>
                        <td>${s.tel}</td>
                        <td>
                            <div class="action-group">
                                <button class="action-btn btn-manage" onclick="app.showShopDashboard(${s.id})">Manage Shop ‚ûî</button>
                                <button class="action-btn btn-delete" onclick="app.deleteShop(${s.id})">Delete</button>
                            </div>
                        </td>
                    </tr>
                `).join('');
            },

            saveProduct: function() {
                if(!this.currentShopId) return alert("Error: No shop selected.");

                const name = document.getElementById('p-name').value;
                const price = document.getElementById('p-price').value;
                const cat = document.getElementById('p-cat').value;
                const badge = document.getElementById('p-badge').value;
                const desc = document.getElementById('p-desc').value;
                
                const woodType = document.getElementById('p-wood').value;

                const colorsRaw = document.getElementById('p-colors').value;
                const colors = colorsRaw ? colorsRaw.split(',').map(s => s.trim()) : ['Standard'];

                const sizesRaw = document.getElementById('p-size').value;
                const sizes = sizesRaw ? sizesRaw.split(',').map(s => s.trim()) : ['Standard'];
                
                let img = this.getFinalImage('p-img');
                
                if(!name || !price) return alert("Product Name and Price are required!");

                if (this.editingProductId) {
                    const productIndex = this.products.findIndex(p => p.id === this.editingProductId);
                    if (productIndex > -1) {
                        if (!img) img = this.products[productIndex].image;

                        this.products[productIndex] = {
                            ...this.products[productIndex],
                            name, 
                            price: parseFloat(price), 
                            category: cat, badge, desc, image: img,
                            sizes: sizes, colors: colors, woodType: woodType
                        };
                        alert("Product Updated Successfully!");
                    }
                } else {
                    if (!img) img = 'https://via.placeholder.com/600x400';
                    
                    const newId = this.products.length > 0 ? Math.max(...this.products.map(p => p.id)) + 1 : 101;
                    this.products.push({
                        id: newId,
                        shopId: this.currentShopId,
                        name,
                        price: parseFloat(price),
                        category: cat,
                        image: img,
                        badge,
                        desc: desc || "No description provided.",
                        sizes: sizes,
                        colors: colors,
                        woodType: woodType
                    });
                    alert("Product Added to Inventory!");
                }

                this.saveData();
                this.renderProductTable();
                this.cancelEdit(); 
            },

            editProduct: function(id) {
                const p = this.products.find(prod => prod.id === id);
                if (!p) return;

                document.getElementById('p-name').value = p.name;
                document.getElementById('p-price').value = p.price;
                document.getElementById('p-cat').value = p.category;
                document.getElementById('p-badge').value = p.badge;
                document.getElementById('p-desc').value = p.desc;
                document.getElementById('p-wood').value = p.woodType || '';
                
                document.getElementById('p-colors').value = p.colors ? p.colors.join(', ') : '';
                document.getElementById('p-size').value = p.sizes ? p.sizes.join(', ') : '';

                const preview = document.getElementById('p-img-preview');
                preview.src = p.image;
                preview.style.display = 'block';
                document.getElementById('p-img-url').value = '';
                document.getElementById('p-img-file').value = '';
                document.getElementById('p-img-final').value = ''; 

                this.editingProductId = id;
                
                document.getElementById('form-title').innerText = "Edit Product: " + p.name;
                document.getElementById('form-title').style.color = "var(--blue)";
                const saveBtn = document.getElementById('save-product-btn');
                saveBtn.innerText = "üíæ Save Changes";
                saveBtn.className = "btn btn-update";
                document.getElementById('cancel-edit-btn').style.display = 'block';

                document.getElementById('product-form-card').scrollIntoView({behavior: 'smooth'});
            },

            cancelEdit: function() {
                document.getElementById('p-name').value = '';
                document.getElementById('p-price').value = '';
                document.getElementById('p-badge').value = '';
                document.getElementById('p-desc').value = '';
                document.getElementById('p-wood').value = '';
                document.getElementById('p-colors').value = '';
                document.getElementById('p-size').value = '';
                document.getElementById('p-img-url').value = '';
                document.getElementById('p-img-final').value = '';
                document.getElementById('p-img-file').value = '';
                document.getElementById('p-img-preview').style.display = 'none';

                this.editingProductId = null;
                document.getElementById('form-title').innerText = "Add Product to Inventory";
                document.getElementById('form-title').style.color = "var(--primary)";
                const saveBtn = document.getElementById('save-product-btn');
                saveBtn.innerText = "+ Add Product";
                saveBtn.className = "btn btn-primary";
                document.getElementById('cancel-edit-btn').style.display = 'none';
            },

            deleteProduct: function(id) {
                if(confirm("Delete this product?")) {
                    this.products = this.products.filter(p => p.id !== id);
                    this.saveData();
                    this.renderProductTable();
                    if(this.editingProductId === id) this.cancelEdit(); 
                }
            },

            renderProductTable: function() {
                const tbody = document.getElementById('product-table');
                const shopProducts = this.products.filter(p => p.shopId === this.currentShopId);

                if(shopProducts.length === 0) {
                    tbody.innerHTML = `<tr><td colspan="5" style="text-align:center; padding:30px; color:#999;">Inventory is empty. Add items above.</td></tr>`;
                    return;
                }

                tbody.innerHTML = shopProducts.map(p => `
                    <tr>
                        <td><img src="${p.image}" style="width:50px; height:50px; border-radius:6px; object-fit:cover;"></td>
                        <td>
                            <strong>${p.name}</strong><br>
                            ${p.badge ? `<span style="font-size:0.7rem; background:#2D1B15; color:#C5A059; padding:2px 6px; border-radius:4px;">${p.badge}</span>` : ''}
                        </td>
                        <td style="font-size:0.85rem; color:#666;">
                            <b>${p.woodType || 'Wood'}</b> - ${p.category}<br>
                            Size: ${p.sizes ? p.sizes.join(', ') : 'Std'} <br>
                            Finish: ${p.colors ? p.colors.join(', ') : 'Std'}
                        </td>
                        <td style="color:#5D4037; font-weight:bold;">Rs. ${p.price.toLocaleString()}</td>
                        <td>
                            <div class="action-group">
                                <button class="action-btn btn-edit" onclick="app.editProduct(${p.id})">Update</button>
                                <button class="action-btn btn-delete" onclick="app.deleteProduct(${p.id})">Delete</button>
                            </div>
                        </td>
                    </tr>
                `).join('');
            },

            resetData: function() {
                if(confirm("DANGER: This will wipe all changes and restore default data. Continue?")) {
                    localStorage.clear();
                    location.href = "index.html"; 
                }
            }
        };

        app.init();
    </script>
</body>
</html>

